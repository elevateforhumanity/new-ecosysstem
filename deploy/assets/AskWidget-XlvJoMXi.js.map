{"version":3,"file":"AskWidget-XlvJoMXi.js","sources":["../../src/components/AskWidget.jsx"],"sourcesContent":["import React, { useState } from 'react';\n\nexport default function AskWidget() {\n  const [open, setOpen] = useState(false);\n  const [q, setQ] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [history, setHistory] = useState([]);\n\n  async function ask(e) {\n    e.preventDefault();\n    if (!q.trim()) return;\n    setLoading(true);\n    try {\n      const res = await fetch('/api/ask', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ question: q }) });\n      const data = await res.json();\n      setHistory(h => [{ q, a: data.answer, topic: data.topic, ts: data.ts }, ...h]);\n      setQ('');\n    } catch (err) {\n      setHistory(h => [{ q, a: 'Error retrieving answer', topic: 'error', ts: Date.now() }, ...h]);\n    } finally { setLoading(false); }\n  }\n\n  return (\n    <div style={{ position: 'fixed', bottom: 16, right: 16, fontFamily: 'system-ui, Arial, sans-serif', zIndex: 9999 }}>\n      {!open && (\n        <button onClick={() => setOpen(true)} style={btnStyle}>Ask</button>\n      )}\n      {open && (\n        <div style={panelStyle}>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <strong>Assistant</strong>\n            <button onClick={() => setOpen(false)} style={closeStyle}>Ã—</button>\n          </div>\n          <form onSubmit={ask} style={{ marginTop: 8 }}>\n            <input\n              value={q}\n              onChange={e => setQ(e.target.value)}\n              placeholder=\"Ask about pricing, affiliate, offers...\"\n              style={inputStyle}\n              disabled={loading}\n            />\n            <button type=\"submit\" disabled={loading} style={submitStyle}>{loading ? '...' : 'Ask'}</button>\n          </form>\n          <div style={{ marginTop: 8, maxHeight: 220, overflowY: 'auto', fontSize: 12 }}>\n            {history.length === 0 && <div style={{ opacity: 0.7 }}>No questions yet.</div>}\n            {history.map((h,i) => (\n              <div key={i} style={{ marginBottom: 8 }}>\n                <div style={{ fontWeight: 600 }}>Q: {h.q}</div>\n                <div>A: {h.a}</div>\n                <div style={{ opacity: 0.6 }}>topic: {h.topic}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst btnStyle = {\n  background: '#2563eb',\n  color: '#fff',\n  border: 'none',\n  padding: '10px 14px',\n  borderRadius: 24,\n  cursor: 'pointer',\n  fontSize: 14,\n  boxShadow: '0 4px 10px rgba(0,0,0,0.15)'\n};\n\nconst panelStyle = {\n  width: 300,\n  background: '#fff',\n  border: '1px solid #e5e7eb',\n  borderRadius: 12,\n  padding: 12,\n  boxShadow: '0 8px 24px rgba(0,0,0,0.15)'\n};\n\nconst closeStyle = { background: 'transparent', border: 'none', fontSize: 18, cursor: 'pointer', lineHeight: 1 };\n\nconst inputStyle = { width: '100%', padding: '6px 8px', borderRadius: 6, border: '1px solid #d1d5db', marginBottom: 6 };\n\nconst submitStyle = { width: '100%', padding: '8px 10px', background: '#111827', color: '#fff', border: 'none', borderRadius: 6, cursor: 'pointer', fontWeight: 600 };\n"],"names":["AskWidget","open","setOpen","useState","q","setQ","loading","setLoading","history","setHistory","ask","data","h","jsxs","jsx","btnStyle","panelStyle","closeStyle","inputStyle","submitStyle","i"],"mappings":"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"}