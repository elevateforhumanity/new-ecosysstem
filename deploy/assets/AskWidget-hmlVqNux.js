import{r as i,j as t}from"./index-Brwkolnq.js";function S(){const[a,d]=i.useState(!1),[s,l]=i.useState(""),[n,c]=i.useState(!1),[p,u]=i.useState([]);async function f(e){if(e.preventDefault(),!!s.trim()){c(!0);try{const o=await(await fetch("/api/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:s})})).json();u(x=>[{q:s,a:o.answer,topic:o.topic,ts:o.ts},...x]),l("")}catch{u(o=>[{q:s,a:"Error retrieving answer",topic:"error",ts:Date.now()},...o])}finally{c(!1)}}}return t.jsxs("div",{style:{position:"fixed",bottom:16,right:16,fontFamily:"system-ui, Arial, sans-serif",zIndex:9999},children:[!a&&t.jsx("button",{onClick:()=>d(!0),style:y,children:"Ask"}),a&&t.jsxs("div",{style:b,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("strong",{children:"Assistant"}),t.jsx("button",{onClick:()=>d(!1),style:g,children:"Ã—"})]}),t.jsxs("form",{onSubmit:f,style:{marginTop:8},children:[t.jsx("input",{value:s,onChange:e=>l(e.target.value),placeholder:"Ask about pricing, affiliate, offers...",style:h,disabled:n}),t.jsx("button",{type:"submit",disabled:n,style:m,children:n?"...":"Ask"})]}),t.jsxs("div",{style:{marginTop:8,maxHeight:220,overflowY:"auto",fontSize:12},children:[p.length===0&&t.jsx("div",{style:{opacity:.7},children:"No questions yet."}),p.map((e,r)=>t.jsxs("div",{style:{marginBottom:8},children:[t.jsxs("div",{style:{fontWeight:600},children:["Q: ",e.q]}),t.jsxs("div",{children:["A: ",e.a]}),t.jsxs("div",{style:{opacity:.6},children:["topic: ",e.topic]})]},r))]})]})]})}const y={background:"#2563eb",color:"#fff",border:"none",padding:"10px 14px",borderRadius:24,cursor:"pointer",fontSize:14,boxShadow:"0 4px 10px rgba(0,0,0,0.15)"},b={width:300,background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:12,boxShadow:"0 8px 24px rgba(0,0,0,0.15)"},g={background:"transparent",border:"none",fontSize:18,cursor:"pointer",lineHeight:1},h={width:"100%",padding:"6px 8px",borderRadius:6,border:"1px solid #d1d5db",marginBottom:6},m={width:"100%",padding:"8px 10px",background:"#111827",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontWeight:600};export{S as default};
//# sourceMappingURL=AskWidget-hmlVqNux.js.map
