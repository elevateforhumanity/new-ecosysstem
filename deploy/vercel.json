{
  "buildCommand": "npm ci && npm run build:partial",
  "ignoreCommand": "node scripts/ignore-if-no-app-change.mjs",
  "outputDirectory": "deploy",
  "rewrites": [
    { "source": "/programs/(.*)", "destination": "/programs/index.html" },
    { "source": "/contracts/(.*)", "destination": "/contracts/index.html" },
    { "source": "/students/(.*)", "destination": "/students/index.html" },
    { "source": "/contact/(.*)", "destination": "/contact/index.html" },
    { "source": "/about/(.*)", "destination": "/about/index.html" },
    { "source": "/policies/(.*)", "destination": "/privacy-policy.html" },
    { "source": "/accessibility/(.*)", "destination": "/index.html#accessibility" },
    { "source": "/(.*)", "destination": "/index.html" }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        { "key": "X-Frame-Options", "value": "SAMEORIGIN" },
        { "key": "X-Content-Type-Options", "value": "nosniff" },
        { "key": "Referrer-Policy", "value": "strict-origin-when-cross-origin" },
        { "key": "Permissions-Policy", "value": "camera=(), microphone=(), geolocation=()" },
        { "key": "Content-Security-Policy", "value": "default-src 'self' https: data: blob: 'unsafe-inline' 'unsafe-eval';" },
        { "key": "Cache-Control", "value": "public, max-age=31536000, immutable" }
      ]
    },
    {
      "source": "/(sitemap\\.xml|robots\\.txt|sitemaps/.*)",
      "headers": [
        { "key": "Cache-Control", "value": "public, max-age=3600" }
      ]
    }
  ],
  "redirects": [
    {
      "source": "/hub.html",
      "destination": "/",
      "permanent": true
    },
    {
      "source": "/programs.html",
      "destination": "/programs/",
      "permanent": true
    },
    {
      "source": "/government-services.html",
      "destination": "/contracts/",
      "permanent": true
    },
    {
      "source": "/account.html",
      "destination": "/students/",
      "permanent": true
    },
    {
      "source": "/connect.html",
      "destination": "/contact/",
      "permanent": true
    }
  ]
}
