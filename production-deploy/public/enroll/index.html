<!doctype html>
<html lang="en">
<head>
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:; frame-ancestors 'none';">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta charset="utf-8" />
  <title>Enrollment System – Elevate for Humanity</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  
  <header class="site-header" role="banner">
    <nav class="nav" aria-label="Primary navigation">
      <a class="brand" href="/" aria-label="Elevate for Humanity home">
        <img src="https://cdn.elevateforhumanity.org/images/brand/efh-logo.svg" alt="Elevate for Humanity" height="40" width="200">
      </a>
      <ul class="nav-list">
        <li><a href="/portal/">Dashboard</a></li>
        <li><a href="/student-portal.html">Learning</a></li>
        <li><a href="/enroll/" aria-current="page">Enrollment</a></li>
        <li><a href="/">Public Site</a></li>
      </ul>
      <button class="btn" id="signOutBtn">Sign Out</button>
    </nav>
  </header>

  <main class="section" id="main">
    <h1>Enrollment Management System</h1>
    
    <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 0.5rem; padding: 1rem; margin: 2rem 0;">
      <h2>🔐 Secure Enrollment Area</h2>
      <p>This enrollment system is protected and only accessible to authenticated users. Manage your program enrollment and course registration here.</p>
    </div>

    <section>
      <h2>Current Enrollment Status</h2>
      <div style="background: #f8f9fa; border-radius: 0.5rem; padding: 1.5rem; margin: 2rem 0;">
        <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
          <div>
            <h3>📚 Program</h3>
            <p><strong>Cybersecurity Analyst Certificate</strong></p>
            <p>Status: <span style="color: var(--success); font-weight: 600;">Active</span></p>
            <p>Start Date: August 15, 2025</p>
            <p>Expected Completion: December 20, 2025</p>
          </div>
          <div>
            <h3>💰 Funding</h3>
            <p><strong>WIOA Individual Training Account</strong></p>
            <p>Status: <span style="color: var(--success); font-weight: 600;">Approved</span></p>
            <p>Amount: $8,500</p>
            <p>Remaining: $6,200</p>
          </div>
          <div>
            <h3>📅 Schedule</h3>
            <p><strong>Evening Program</strong></p>
            <p>Days: Monday, Wednesday, Friday</p>
            <p>Time: 6:00 PM - 9:00 PM</p>
            <p>Location: Room 204</p>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2>Available Actions</h2>
      <div class="cards">
        <div class="card">
          <div class="card-body">
            <h3>📝 Course Registration</h3>
            <p>Register for additional courses or modify your current schedule.</p>
            <a class="btn btn-primary" href="/enroll/courses/">Manage Courses</a>
          </div>
        </div>
        
        <div class="card">
          <div class="card-body">
            <h3>💳 Payment & Funding</h3>
            <p>View payment history, funding status, and financial aid information.</p>
            <a class="btn btn-primary" href="/enroll/payment/">Payment Center</a>
          </div>
        </div>
        
        <div class="card">
          <div class="card-body">
            <h3>📄 Documents</h3>
            <p>Upload required documents, view enrollment agreements, and certificates.</p>
            <a class="btn btn-primary" href="/enroll/documents/">Document Center</a>
          </div>
        </div>
        
        <div class="card">
          <div class="card-body">
            <h3>👤 Personal Information</h3>
            <p>Update your contact information, emergency contacts, and preferences.</p>
            <a class="btn btn-primary" href="/enroll/profile/">Update Profile</a>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2>Important Notices</h2>
      <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 0.5rem; padding: 1.5rem;">
        <h3>📢 Upcoming Requirements</h3>
        <ul>
          <li><strong>September 25:</strong> Mid-program assessment due</li>
          <li><strong>October 1:</strong> Updated emergency contact information required</li>
          <li><strong>October 15:</strong> Career services appointment scheduling opens</li>
        </ul>
      </div>
    </section>

    <section>
      <h2>Support Resources</h2>
      <div style="background: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 0.5rem; padding: 1.5rem;">
        <div style="display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
          <div>
            <h3>🎓 Academic Advising</h3>
            <p>Schedule a meeting with your academic advisor for course planning and career guidance.</p>
            <a href="mailto:advising@elevateforhumanity.org">advising@elevateforhumanity.org</a>
          </div>
          <div>
            <h3>💼 Career Services</h3>
            <p>Get help with resume writing, interview preparation, and job placement assistance.</p>
            <a href="mailto:careers@elevateforhumanity.org">careers@elevateforhumanity.org</a>
          </div>
          <div>
            <h3>🆘 Student Support</h3>
            <p>Access counseling services, disability accommodations, and emergency assistance.</p>
            <a href="mailto:support@elevateforhumanity.org">support@elevateforhumanity.org</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <section class="footer-grid">
      <div>
        <h3>Enrollment Support</h3>
        <p>
          <strong>Phone:</strong> <a href="tel:+1-317-555-9675">(317) 555-WORK</a><br>
          <strong>Email:</strong> <a href="mailto:enrollment@elevateforhumanity.org">enrollment@elevateforhumanity.org</a>
        </p>
      </div>
      <div>
        <h3>Office Hours</h3>
        <p>
          <strong>Monday-Friday:</strong> 8:00 AM - 6:00 PM<br>
          <strong>Saturday:</strong> 9:00 AM - 2:00 PM<br>
          <strong>Sunday:</strong> Closed
        </p>
      </div>
    </section>
  </footer>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
    
    const supabaseUrl = import.meta.env?.VITE_SUPABASE_URL || 'YOUR_SUPABASE_URL';
    const supabaseAnonKey = import.meta.env?.VITE_SUPABASE_ANON_KEY || 'YOUR_SUPABASE_ANON_KEY';
    
    if (supabaseUrl !== 'YOUR_SUPABASE_URL' && supabaseAnonKey !== 'YOUR_SUPABASE_ANON_KEY') {
      const supabase = createClient(supabaseUrl, supabaseAnonKey);
      
      // Handle sign out
      document.getElementById('signOutBtn').onclick = async () => {
        const { error } = await supabase.auth.signOut();
        if (error) {
          alert(`Sign out error: ${error.message}`);
        } else {
          // Clear the cookie
          document.cookie = 'sb-access-token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
          // Redirect to home page
          window.location.href = '/';
        }
      };
    } else {
      document.getElementById('signOutBtn').onclick = () => {
        alert('Sign out not available in demo mode');
      };
    }
  </script>
</body>
</html>